var c=Object.defineProperty;var y=Object.getOwnPropertyDescriptor;var g=Object.getOwnPropertyNames;var h=Object.prototype.hasOwnProperty;var v=(r,i)=>{for(var e in i)c(r,e,{get:i[e],enumerable:!0})},m=(r,i,e,t)=>{if(i&&typeof i=="object"||typeof i=="function")for(let a of g(i))!h.call(r,a)&&a!==e&&c(r,a,{get:()=>i[a],enumerable:!(t=y(i,a))||t.enumerable});return r};var f=r=>m(c({},"__esModule",{value:!0}),r);var S={};v(S,{default:()=>o});module.exports=f(S);var n=require("obsidian"),w={material:"mica",vibrancy:"sidebar"},o=class extends n.Plugin{constructor(){super(...arguments);this.electronWindow=null}async onload(){if(await this.loadSettings(),this.electronWindow=this.getElectronWindow(),!this.electronWindow)return;n.Platform.isWin?(this.applyMaterial(),document.body.classList.add("is-translucent"),document.body.style.setProperty("--workspace-background-translucent","transparent","important"),document.body.style.setProperty("--titlebar-background","transparent","important"),document.body.style.setProperty("--titlebar-background-focused","transparent","important")):n.Platform.isMacOS&&this.applyVibrancy();let e=()=>{n.Platform.isWin?new p(this.app,this).open():n.Platform.isMacOS&&new d(this.app,this).open()},t=n.Platform.isWin?"Change material":"Change vibrancy";this.addRibbonIcon("layers",t,e),this.addCommand({id:"open-pseudo-mica-settings",name:t,callback:e})}onunload(){var e,t,a,l;n.Platform.isWin?((t=(e=this.electronWindow)==null?void 0:e.setBackgroundMaterial)==null||t.call(e,"none"),document.body.classList.remove("is-translucent"),document.body.style.removeProperty("--workspace-background-translucent"),document.body.style.removeProperty("--titlebar-background"),document.body.style.removeProperty("--titlebar-background-focused")):n.Platform.isMacOS&&((l=(a=this.electronWindow)==null?void 0:a.setVibrancy)==null||l.call(a,null))}async loadSettings(){this.settings=Object.assign({},w,await this.loadData())}async saveSettings(){await this.saveData(this.settings)}getElectronWindow(){var e,t,a;try{return((e=require("@electron/remote"))==null?void 0:e.getCurrentWindow())||((a=(t=window.require)==null?void 0:t.call(window,"@electron/remote"))==null?void 0:a.getCurrentWindow())||null}catch(l){return null}}applyMaterial(){var e,t;try{(t=(e=this.electronWindow)==null?void 0:e.setBackgroundMaterial)==null||t.call(e,this.settings.material)}catch(a){console.error("Error applying material:",a)}}applyVibrancy(){var e,t;try{(t=(e=this.electronWindow)==null?void 0:e.setVibrancy)==null||t.call(e,this.settings.vibrancy)}catch(a){console.error("Error applying vibrancy:",a)}}},s=class extends n.FuzzySuggestModal{constructor(e,t,a){super(e);this.plugin=t;this.confirmed=!1;this.setPlaceholder(a),this.originalValue=this.getSetting()}onOpen(){super.onOpen();let e=this.chooser,t=e.setSelectedItem.bind(e);e.setSelectedItem=(a,l)=>{var b;t(a,l);let u=(b=e.values)==null?void 0:b[a];u&&(this.setSetting(u.item.value),this.applyEffect())}}onClose(){this.confirmed||(this.setSetting(this.originalValue),this.applyEffect())}getItems(){return this.options}getItemText(e){return e.label}async onChooseItem(e){this.confirmed=!0,this.setSetting(e.value),await this.plugin.saveSettings(),this.applyEffect()}},p=class extends s{constructor(e,t){super(e,t,"Select material...");this.options=[{value:"mica",label:"Mica"},{value:"tabbed",label:"Mica Alt"},{value:"acrylic",label:"Acrylic"}]}getSetting(){return this.plugin.settings.material}setSetting(e){e&&(this.plugin.settings.material=e)}applyEffect(){this.plugin.applyMaterial()}},d=class extends s{constructor(e,t){super(e,t,"Select vibrancy...");this.options=[{value:"titlebar",label:"Titlebar"},{value:"selection",label:"Selection"},{value:"menu",label:"Menu"},{value:"popover",label:"Popover"},{value:"sidebar",label:"Sidebar"},{value:"header",label:"Header"},{value:"sheet",label:"Sheet"},{value:"window",label:"Window"},{value:"hud",label:"HUD"},{value:"fullscreen-ui",label:"Fullscreen UI"},{value:"tooltip",label:"Tooltip"},{value:"content",label:"Content"},{value:"under-window",label:"Under Window"},{value:"under-page",label:"Under Page"}]}getSetting(){return this.plugin.settings.vibrancy}setSetting(e){this.plugin.settings.vibrancy=e}applyEffect(){this.plugin.applyVibrancy()}};

/* nosourcemap */